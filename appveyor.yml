version: 1.0.3.{build}

configuration: Release

before_build:
  - ps: nuget restore

dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '{version}'
  package_version: '{version}'
  assembly_version: '{version}'
  file_version: '{version}'
  informational_version: '{version}'

build:
  publish_nuget: true
  verbosity: minimal
  

artifacts:
  - path: /Output/CalculatePrimesMultithreaded.exe
    name: CalcPrimesMultiThread

after_build:
  - ps: '& "C:\Program Files (x86)\Inno Setup 6\iscc.exe" "Deployment\Inno Config.iss"'
    
deploy:
  - provider: GitHub
    auth_token: # encrypted token:
      secure: HESVuhwKdUbPpbBsQrWslB7GYNy5r03/MN/enpu7UWbY886bOE+EpbEFwAVMrtLO
    artifact: CalcPrimesMultiThread
    draft: true
    prerelease: false
    force_update: false
    on:
      branch: master